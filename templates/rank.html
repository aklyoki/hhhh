<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>å€Ÿé˜…æ’è¡Œ - å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <nav class="navbar navbar-expand-lg navbar-dark bg-primary">
        <div class="container">
            <a class="navbar-brand" href="/reader_center">ğŸ“š å›¾ä¹¦é¦†ç®¡ç†ç³»ç»Ÿ</a>
            <div class="navbar-nav ms-auto">
                <a class="nav-link" href="/reader_center">ä¸ªäººä¸­å¿ƒ</a>
                <a class="nav-link active" href="/rank">å€Ÿé˜…æ’è¡Œ</a>
                <a class="nav-link" href="/api/reader/logout">é€€å‡ºç™»å½•</a>
            </div>
        </div>
    </nav>
    <div class="container mt-4">
        <div class="row">
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-header text-center fs-5">ğŸ”¥ çƒ­é—¨å›¾ä¹¦å€Ÿé˜…æ’è¡ŒTOP10</div>
                    <div class="card-body" id="bookRank"></div>
                </div>
            </div>
            <div class="col-md-6 mb-4">
                <div class="card">
                    <div class="card-header text-center fs-5">ğŸŒŸ è¯»è€…å€Ÿé˜…æ’è¡ŒTOP10</div>
                    <div class="card-body" id="readerRank"></div>
                </div>
            </div>
        </div>
    </div>
    <script>
        // è·å–å›¾ä¹¦æ’è¡Œ
        fetch("/api/stat/book_rank")
            .then(res=>res.json())
            .then(data=>{
                let html = "<ol>";
                data.data.forEach(item=>html+=`<li>${item.book_name} - ${item.author} (${item.borrow_count}æ¬¡)</li>`);
                html += "</ol>";
                document.getElementById("bookRank").innerHTML = data.data.length>0 ? html : "<p class='text-center'>æš‚æ— å€Ÿé˜…æ•°æ®</p>";
            })
        // è·å–è¯»è€…æ’è¡Œ
        fetch("/api/stat/reader_rank")
            .then(res=>res.json())
            .then(data=>{
                let html = "<ol>";
                data.data.forEach(item=>html+=`<li>${item.real_name} (${item.borrow_count}æ¬¡)</li>`);
                html += "</ol>";
                document.getElementById("readerRank").innerHTML = data.data.length>0 ? html : "<p class='text-center'>æš‚æ— å€Ÿé˜…æ•°æ®</p>";
            })
    </script>
</body>
</html>